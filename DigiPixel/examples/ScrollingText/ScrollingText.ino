#include <DigiPixel.h>
#include <avr/pgmspace.h>


// leave the following line uncommented for use with a Digispark
//DigiPixel digiPixel(3,0,5,2,1);  // LED Latch/Button Shift !load pin, LED/Button clock pin, LED Data Pin, LED Output Enable pin, Buttons data pin)

// leave the following line uncommented for use with an Arduino
DigiPixel digiPixel(5,2,6,4,3);  // LED Latch/Button Shift !load pin, LED/Button clock pin, LED Data Pin, LED Output Enable pin, Buttons data pin)


// Program memory arrays
byte myNameRed[64]PROGMEM={0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b11111110, 0b00010000, 0b00010000, 0b00010000, 0b00010000, 0b11111110, 0b00000000, 0b10111110, 0b00000000, 0b00000011, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b11111010, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000};
byte myNameGreen[64]PROGMEM={0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b11111110, 0b00000000, 0b11000000, 0b00000000, 0b00111110, 0b00100000, 0b00100000, 0b00111110, 0b00100000, 0b00100000, 0b00011110, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b11111010, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000};
byte myNameBlue[64]PROGMEM={0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b11111110, 0b10010010, 0b10010010, 0b10010010, 0b10010010, 0b01101100, 0b00000000, 0b00111110, 0b00100000, 0b00000000, 0b00000100, 0b00101010, 0b00101010, 0b00011110, 0b00000000, 0b00011100, 0b00100010, 0b00100010, 0b11111110, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000};


// Constants
#define ScrollSpeedSave 3

// Variables
byte ScrollSpeed = ScrollSpeedSave;  
byte TextOffset = 0;


void setup(){
  
}


void loop(){  
  updateGraphics();                  
  saveGraphics();                    
  digiPixel.saveButtonStates();     
  digiPixel.drawScreen();           
}

void updateGraphics(){
  if (ScrollSpeed != 0){
    ScrollSpeed--;
  }
  else{
     ScrollSpeed = ScrollSpeedSave;
     TextOffset++;  
     if (TextOffset == sizeof(myNameRed) - 8){
       TextOffset = 0; 
     }
  }
}

void saveGraphics(){
  digiPixel.clearScreen();
  for (byte index = 0; index <= 7; index++){
   digiPixel.bufferRed[index] = pgm_read_dword(&myNameRed[(index) + TextOffset]);
   digiPixel.bufferGreen[index] = pgm_read_dword(&myNameGreen[(index) + TextOffset]);
   digiPixel.bufferBlue[index] = pgm_read_dword(&myNameBlue[(index) + TextOffset]);
   }
}




